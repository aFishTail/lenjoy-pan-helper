# Lenjoy Browser Helper

ğŸš€ å¤¸å…‹ç½‘ç›˜å¢å¼ºå·¥å…· - ä¸€é”®é¢„è§ˆæ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶

[![Chrome MV3](https://img.shields.io/badge/Chrome-MV3-green.svg)](https://developer.chrome.com/docs/extensions/mv3/)
[![Vue 3](https://img.shields.io/badge/Vue-3.x-brightgreen.svg)](https://vuejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)
[![WXT](https://img.shields.io/badge/WXT-0.20-orange.svg)](https://wxt.dev/)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ“ æ–‡ä»¶å¤¹é¢„è§ˆ**ï¼šåœ¨æ–‡ä»¶å¤¹è¡Œæ‚¬æµ®æ˜¾ç¤ºã€Œé¢„è§ˆã€æŒ‰é’®ï¼Œä¸€é”®æŸ¥çœ‹æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶
- **ğŸ”„ é€’å½’åŠ è½½**ï¼šå¯é€‰æ‹©æ˜¯å¦åŒ…å«å­æ–‡ä»¶å¤¹ï¼Œé€’å½’è·å–æ‰€æœ‰å±‚çº§çš„æ–‡ä»¶
- **ğŸ” æ™ºèƒ½ç­›é€‰**ï¼šæ”¯æŒæŒ‰æ–‡ä»¶ç±»å‹ï¼ˆè§†é¢‘/å›¾ç‰‡/æ–‡æ¡£/éŸ³é¢‘/å‹ç¼©åŒ…ï¼‰ç­›é€‰
- **ğŸ” å¿«é€Ÿæœç´¢**ï¼šæ”¯æŒæŒ‰æ–‡ä»¶åæœç´¢
- **ğŸ“Š ç»Ÿè®¡ä¿¡æ¯**ï¼šæ˜¾ç¤ºæ–‡ä»¶æ•°é‡ã€æ€»å¤§å°ç­‰ç»Ÿè®¡æ•°æ®
- **ğŸ¨ ä¼˜é›… UI**ï¼šåŸºäº Element Plus çš„ä¾§è¾¹æ ç•Œé¢ï¼Œä¸å¤¸å…‹ç½‘ç›˜é£æ ¼åè°ƒ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯                                          | è¯´æ˜                   |
| --------------------------------------------- | ---------------------- |
| [WXT](https://wxt.dev/)                       | ä¸‹ä¸€ä»£æµè§ˆå™¨æ‰©å±•æ¡†æ¶   |
| [Vue 3](https://vuejs.org/)                   | æ¸è¿›å¼ JavaScript æ¡†æ¶ |
| [TypeScript](https://www.typescriptlang.org/) | ç±»å‹å®‰å…¨çš„ JavaScript  |
| [Element Plus](https://element-plus.org/)     | Vue 3 UI ç»„ä»¶åº“        |
| [Pinia](https://pinia.vuejs.org/)             | Vue çŠ¶æ€ç®¡ç†           |
| [Vite](https://vitejs.dev/)                   | ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·     |
| [SCSS](https://sass-lang.com/)                | CSS é¢„å¤„ç†å™¨           |

## ğŸ“ é¡¹ç›®ç»“æ„

```
lenjoy-browser-helper/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ entrypoints/           # æ‰©å±•å…¥å£ç‚¹
â”‚   â”‚   â”œâ”€â”€ background.ts      # Service Worker
â”‚   â”‚   â”œâ”€â”€ content.ts         # Content Script (Vue UI)
â”‚   â”‚   â””â”€â”€ injected.ts        # Main World è„šæœ¬ (API è°ƒç”¨)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/            # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SidePanel/         # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚       â””â”€â”€ index.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/           # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â””â”€â”€ useDomObserver.ts  # DOM ç›‘å¬ + æŒ‰é’®æ³¨å…¥
â”‚   â”‚
â”‚   â”œâ”€â”€ services/              # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ bridge.ts          # Content â†” Main World é€šä¿¡
â”‚   â”‚   â””â”€â”€ quark/
â”‚   â”‚       â””â”€â”€ api.ts         # å¤¸å…‹ API å°è£…
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ fileStore.ts       # æ–‡ä»¶åˆ—è¡¨çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                 # TypeScript ç±»å‹
â”‚   â”‚   â””â”€â”€ quark.ts           # å¤¸å…‹ API ç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ constants.ts       # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ file.ts            # æ–‡ä»¶å¤„ç†å·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ styles/                # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ variables.scss     # SCSS å˜é‡
â”‚
â”œâ”€â”€ .output/                   # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ wxt.config.ts              # WXT é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¤¸å…‹ç½‘ç›˜é¡µé¢                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Main World (é¡µé¢ä¸»ä¸–ç•Œ)                  â”‚   â”‚
â”‚  â”‚   â€¢ injected.ts                                     â”‚   â”‚
â”‚  â”‚   â€¢ è°ƒç”¨å¤¸å…‹ API (Origin: pan.quark.cn)             â”‚   â”‚
â”‚  â”‚   â€¢ Cookie è‡ªåŠ¨æºå¸¦                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†• window.postMessage              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Content Script (Isolated World)            â”‚   â”‚
â”‚  â”‚   â€¢ content.ts + Vue 3 åº”ç”¨                         â”‚   â”‚
â”‚  â”‚   â€¢ ä¾§è¾¹æ  UI æ¸²æŸ“                                   â”‚   â”‚
â”‚  â”‚   â€¢ DOM ç›‘å¬ + æŒ‰é’®æ³¨å…¥                              â”‚   â”‚
â”‚  â”‚   â€¢ Pinia çŠ¶æ€ç®¡ç†                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†• chrome.runtime.sendMessage
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Background Service Worker                      â”‚
â”‚   â€¢ æ‰©å±•ç”Ÿå‘½å‘¨æœŸç®¡ç†                                         â”‚
â”‚   â€¢ [é¢„ç•™] æŒä¹…åŒ–å­˜å‚¨                                        â”‚
â”‚   â€¢ [é¢„ç•™] è·¨é¡µé¢çŠ¶æ€åŒæ­¥                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- pnpm >= 8

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
# Chrome å¼€å‘æ¨¡å¼ï¼ˆçƒ­æ›´æ–°ï¼‰
pnpm dev

# Firefox å¼€å‘æ¨¡å¼
pnpm dev:firefox
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»º Chrome ç‰ˆæœ¬
pnpm build

# æ„å»º Firefox ç‰ˆæœ¬
pnpm build:firefox
```

### æ‰“åŒ…æ‰©å±•

```bash
# æ‰“åŒ… Chrome æ‰©å±• (.zip)
pnpm zip

# æ‰“åŒ… Firefox æ‰©å±• (.zip)
pnpm zip:firefox
```

## ğŸ“¦ å®‰è£…æ‰©å±•

### Chrome / Edge

1. è¿è¡Œ `pnpm build`
2. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `chrome://extensions/`
3. å¼€å¯å³ä¸Šè§’ã€Œå¼€å‘è€…æ¨¡å¼ã€
4. ç‚¹å‡»ã€ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºã€
5. é€‰æ‹© `.output/chrome-mv3` ç›®å½•

### Firefox

1. è¿è¡Œ `pnpm build:firefox`
2. æ‰“å¼€ Firefoxï¼Œè®¿é—® `about:debugging#/runtime/this-firefox`
3. ç‚¹å‡»ã€Œä¸´æ—¶è½½å…¥é™„åŠ ç»„ä»¶ã€
4. é€‰æ‹© `.output/firefox-mv2` ç›®å½•ä¸‹çš„ `manifest.json`

## ğŸ“– ä½¿ç”¨è¯´æ˜

1. æ‰“å¼€å¤¸å…‹ç½‘ç›˜ [https://pan.quark.cn/](https://pan.quark.cn/)
2. ç™»å½•ä½ çš„è´¦å·
3. è¿›å…¥ä»»æ„åŒ…å«æ–‡ä»¶å¤¹çš„ç›®å½•
4. é¼ æ ‡æ‚¬æµ®åœ¨æ–‡ä»¶å¤¹è¡Œä¸Šï¼Œä¼šçœ‹åˆ° **ğŸ‘ é¢„è§ˆ** æŒ‰é’®
5. ç‚¹å‡»æŒ‰é’®ï¼Œå³ä¾§å¼¹å‡ºä¾§è¾¹æ 
6. åœ¨ä¾§è¾¹æ ä¸­ï¼š
   - å‹¾é€‰ã€ŒåŒ…å«å­æ–‡ä»¶å¤¹ã€å¯é€’å½’åŠ è½½æ‰€æœ‰å­ç›®å½•çš„æ–‡ä»¶
   - ä½¿ç”¨ä¸‹æ‹‰æ¡†æŒ‰æ–‡ä»¶ç±»å‹ç­›é€‰
   - ä½¿ç”¨æœç´¢æ¡†æŒ‰æ–‡ä»¶åæœç´¢
   - æŸ¥çœ‹æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯

## ğŸ”§ é…ç½®è¯´æ˜

### WXT é…ç½® (`wxt.config.ts`)

```typescript
export default defineConfig({
  srcDir: 'src',
  modules: ['@wxt-dev/module-vue'],
  manifest: {
    name: 'Lenjoy Browser Helper',
    permissions: ['storage'],
    host_permissions: ['*://pan.quark.cn/*', '*://drive-pc.quark.cn/*'],
  },
});
```

### å…³é”®é…ç½®é¡¹

| é…ç½®                       | è¯´æ˜                   |
| -------------------------- | ---------------------- |
| `host_permissions`         | å…è®¸è®¿é—®çš„åŸŸå         |
| `web_accessible_resources` | å¯ä»é¡µé¢è®¿é—®çš„æ‰©å±•èµ„æº |

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“ å¼€å‘è®¡åˆ’

- [x] åŸºç¡€æ–‡ä»¶åˆ—è¡¨é¢„è§ˆ
- [x] é€’å½’åŠ è½½å­æ–‡ä»¶å¤¹
- [x] æ–‡ä»¶ç±»å‹ç­›é€‰
- [x] æ–‡ä»¶åæœç´¢
- [ ] Popup é¡µé¢ï¼ˆå¿«æ·æ“ä½œï¼‰
- [ ] Options è®¾ç½®é¡µé¢
- [ ] æ–‡ä»¶è¯¦æƒ…æŸ¥çœ‹
- [ ] å¯¼å‡ºæ–‡ä»¶åˆ—è¡¨
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ
- [ ] å¤šè¯­è¨€æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

## ğŸ™ è‡´è°¢

- [WXT](https://wxt.dev/) - ä¼˜ç§€çš„æµè§ˆå™¨æ‰©å±•å¼€å‘æ¡†æ¶
- [Element Plus](https://element-plus.org/) - ç¾è§‚çš„ Vue 3 ç»„ä»¶åº“
- [å¤¸å…‹ç½‘ç›˜](https://pan.quark.cn/) - æä¾›äº‘å­˜å‚¨æœåŠ¡

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª Starï¼**
